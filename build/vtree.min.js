this.Vtree=function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var o,i,r,s;o=n(2),i=n(3),r=n(4),e.exports=s=function(){function e(){}return e.DOM=i,e.initNodes=function(){return this._launcher().launch(this.config()),this._launcher().createViewsTree()},e.initNodesAsync=function(){return AsyncFn.addToCallQueue(function(e){return function(){var t;return t=new $.Deferred,AsyncFn.setImmediate(function(){return e.initNodes(),t.resolve()}),t.promise()}}(this))},e.onNodeInit=function(e){return this.hooks().onInit(e)},e.getInitCallbacks=function(){return this.hooks().onInitCallbacks()},e.onNodeUnload=function(e){return this.hooks().onUnload(e)},e.getUnloadCallbacks=function(){return this.hooks().onUnloadCallbacks()},e.configure=function(e){return _.extend(this.config(),e)},e.config=function(){return null!=this._config?this._config:this._config=new o},e.hooks=function(){return this._launcher().hooks()},e._launcher=function(){return null!=this.__launcher?this.__launcher:this.__launcher=r},e}(),window.Vtree=s},function(e,t){var n;e.exports=n=function(){function e(){}return e.prototype.viewSelector="[data-view]",e.prototype.componentSelector="[data-component]",e.prototype.selector="[data-component], [data-view]",e.prototype.namespacePattern=/(.+)#(.+)/,e.prototype.isComponentIndex=function(e){return null!=e.data("component")},e.prototype.nodeUnderscoredName=function(e){return this.isComponentIndex(e)?e.data("component"):e.data("view")||""},e.prototype.isStandAlone=function(e){return!this.isComponentIndex(e)&&this.namespacePattern.test(this.nodeUnderscoredName(e))},e.prototype.extractStandAloneNodeData=function(e){var t,n,o,i;return i=this.nodeUnderscoredName(e).match(this.namespacePattern),t=i[0],n=i[1],o=i[2],[n,o]},e.prototype.extractComponentIndexNodeData=function(e){var t,n,o,i;return i=this.nodeUnderscoredName(e).match(this.namespacePattern),t=i[0],o=i[1],n=i[2],[o,n]},e}()},function(e,t){var n;e.exports=n=function(){function e(){}return e.html=function(e,t){return e.children().each(function(e,t){return $(t).remove()}),e.html(t),e.trigger("refresh")},e.append=function(e,t){return e.append(t),e.trigger("refresh")},e.prepend=function(e,t){return e.prepend(t),e.trigger("refresh")},e.before=function(e,t){return e.before(t),e.parent().trigger("refresh")},e.after=function(e,t){return e.after(t),e.parent().trigger("refresh")},e.remove=function(e){return e.remove()},e.htmlAsync=function(e,t){return AsyncFn.addToCallQueue(function(){var n;return n=new $.Deferred,AsyncFn.setImmediate(function(){return e.children().each(function(e,t){return $(t).remove()}),e.html(t),e.trigger("refresh"),n.resolve()}),n.promise()})},e.appendAsync=function(e,t){return AsyncFn.addToCallQueue(function(){var n;return n=new $.Deferred,AsyncFn.setImmediate(function(){return e.append(t),e.trigger("refresh"),n.resolve()}),n.promise()})},e.prependAsync=function(e,t){return AsyncFn.addToCallQueue(function(){var n;return n=new $.Deferred,AsyncFn.setImmediate(function(){return e.prepend(t),e.trigger("refresh"),n.resolve()}),n.promise()})},e.beforeAsync=function(e,t){return AsyncFn.addToCallQueue(function(){var n;return n=new $.Deferred,AsyncFn.setImmediate(function(){return e.before(t),e.parent().trigger("refresh"),n.resolve()}),n.promise()})},e.afterAsync=function(e,t){return AsyncFn.addToCallQueue(function(){var n;return n=new $.Deferred,AsyncFn.setImmediate(function(){return e.after(t),e.parent().trigger("refresh"),n.resolve()}),n.promise()})},e}()},function(e,t,n){var o,i,r;r=n(5),o=n(8),e.exports=i=function(){function e(){}return e.launch=function(e){return this.initTreeManager(e),this.initRemoveEvent(e),this.initRefreshEvent(e)},e.initTreeManager=function(e){if(!this.isTreeManagerInitialized())return this.setTreeManagerAsInitialized(),this.treeManager=new r(e,this.hooks())},e.initRemoveEvent=function(){if(!this.isRemoveEventInitialized())return this.setRemoveEventAsInitialized(),$.event.special.remove={remove:function(e){var t,n;return n=this,t={type:"remove",data:e.data,currentTarget:n},e.handler(t)}}},e.initRefreshEvent=function(e){var t;if(!this.isRefreshEventInitialized())return this.setRefreshEventAsInitialized(),t=function(t){return function(n){var o,i,r;for(n.stopPropagation(),o=$(n.currentTarget).closest(e.selector),r=o.data("vtree-node-id");o.length&&!r;)o=o.parent().closest(e.selector),r=o.data("vtree-node-id");if(r)return i=t.treeManager.nodesCache.getById(r),t.treeManager.refresh(i)}}(this),$("body").on("refresh",t),$("body").on("refresh","*",t)},e.createViewsTree=function(){return this.treeManager.createTree()},e.hooks=function(){return null!=this._hooks?this._hooks:null!=this._hooks?this._hooks:this._hooks=new o},e.isTreeManagerInitialized=function(){return null!=this._isTreeManagerInitialized?this._isTreeManagerInitialized:this._isTreeManagerInitialized=!1},e.setTreeManagerAsInitialized=function(){return this._isTreeManagerInitialized=!0},e.isRemoveEventInitialized=function(){return null!=this._isRemoveEventInitialized?this._isRemoveEventInitialized:this._isRemoveEventInitialized=!1},e.setRemoveEventAsInitialized=function(){return this._isRemoveEventInitialized=!0},e.isRefreshEventInitialized=function(){return null!=this._isRefreshEventInitialized?this._isRefreshEventInitialized:this._isRefreshEventInitialized=!1},e.setRefreshEventAsInitialized=function(){return this._isRefreshEventInitialized=!0},e}(),modula.export("vtree/launcher",i)},function(e,t,n){var o,i,r,s,a;s=n(6),i=n(7),r=n(9),o=n(8),e.exports=a=function(){function e(e,t){if(this.config=e,this.launcherHooks=t,null==this.launcherHooks)throw new Error("Launcher hooks are required");this.initNodeHooks(),this.initialNodes=[],this.nodesCache=new s}return e.prototype.initNodeHooks=function(){return this.hooks=new o,this.hooks.onInit(_.bind(this.addNodeIdToElData,this)),this.hooks.onInit(_.bind(this.addRemoveEventHandlerToEl,this)),this.hooks.onActivation(_.bind(this.addNodeWrapper,this)),this.hooks.onUnload(_.bind(this.unloadNode,this)),this.hooks.onUnload(_.bind(this.deleteNodeWrapper,this))},e.prototype.createTree=function(){return this.setInitialNodes(),this.setParentsForInitialNodes(),this.setChildrenForInitialNodes(),this.activateInitialNodes()},e.prototype.setInitialNodes=function(){var e,t,n,o,r,s;for(e=$(this.config.selector),this.initialNodes=[],s=[],t=n=0,r=e.length;0<=r?n<r:n>r;t=0<=r?++n:--n)o=new i(e.eq(t),this.hooks),this.nodesCache.add(o),s.push(this.initialNodes.push(o));return s},e.prototype.setParentsForInitialNodes=function(){return this.setParentsForNodes(this.initialNodes)},e.prototype.setChildrenForInitialNodes=function(){return this.setChildrenForNodes(this.initialNodes)},e.prototype.setParentsForNodes=function(e){var t,n,o,i,r,s;for(s=[],n=0,o=e.length;n<o;n++)i=e[n],t=i.$el.parent().closest(this.config.selector),0===t.length?s.push(this.nodesCache.addAsRoot(i)):(r=t.data("vtree-node-id"),s.push(i.parent=this.nodesCache.getById(r)));return s},e.prototype.setChildrenForNodes=function(e){var t,n,o,i,r,s;if(e.length){for(s=[],t=n=i=e.length-1;i<=0?n<=0:n>=0;t=i<=0?++n:--n)o=e[t],s.push(null!=(r=o.parent)?r.prependChild(o):void 0);return s}},e.prototype.activateInitialNodes=function(){return this.activateRootNodes(this.initialNodes)},e.prototype.activateRootNodes=function(e){var t,n,o,i,r;for(r=this.nodesCache.showRootNodes(),i=[],t=0,n=r.length;t<n;t++)o=r[t],i.push(this.activateNode(o));return i},e.prototype.activateNode=function(e){var t,n,o,i,r;for(e.activate(),i=e.children,r=[],n=0,o=i.length;n<o;n++)t=i[n],r.push(this.activateNode(t));return r},e.prototype.removeNode=function(e){if(!e.isRemoved())return e.parent&&e.parent.removeChild(e),this.removeChildNodes(e),e.remove(),this.nodesCache.removeById(e.id)},e.prototype.removeChildNodes=function(e){var t,n,o,i,r;for(i=e.children,r=[],n=0,o=i.length;n<o;n++)t=i[n],this.removeChildNodes(t),t.remove(),r.push(this.nodesCache.removeById(t.id));return r},e.prototype.refresh=function(e){var t,n,o,r,s,a,d,h,u,c;for(n=e.$el.find(this.config.selector),d=[e],o=r=0,c=n.length;0<=c?r<c:r>c;o=0<=c?++r:--r)t=n.eq(o),(u=t.data("vtree-node-id"))?h=this.nodesCache.getById(u):(h=new i(t,this.hooks),this.nodesCache.add(h)),d.push(h);for(s=0,a=d.length;s<a;s++)h=d[s],h.children.length=0;return this.setParentsForNodes(d),this.setChildrenForNodes(d),this.activateNode(e)},e.prototype.addNodeIdToElData=function(e){return e.$el.data("vtree-node-id",e.id)},e.prototype.addRemoveEventHandlerToEl=function(e){return e.$el.on("remove",function(t){return function(){return t.removeNode(e)}}(this))},e.prototype.addNodeWrapper=function(e){return e.nodeWrapper=new r(e,this.config,this.launcherHooks)},e.prototype.unloadNode=function(e){var t;return null!=(t=e.nodeWrapper)&&"function"==typeof t.unload?t.unload():void 0},e.prototype.deleteNodeWrapper=function(e){return delete e.nodeWrapper},e}()},function(e,t){var n;e.exports=n=function(){function e(e,t){this.nodes=null!=e?e:{},this.rootNodes=null!=t?t:[]}return e.prototype.show=function(){return this.nodes},e.prototype.showRootNodes=function(){return this.rootNodes},e.prototype.add=function(e){return this.nodes[e.id]=e},e.prototype.addAsRoot=function(e){if(null==this.nodes[e.id])throw new Error("Trying to add node as root, but node is not cached previously");return this.rootNodes.push(e)},e.prototype.getById=function(e){return this.nodes[e]},e.prototype.removeById=function(e){var t;return(t=_.indexOf(this.rootNodes,this.nodes[e]))!==-1&&this.rootNodes.splice(t,1),delete this.nodes[e]},e.prototype.clear=function(){return this.nodes={},this.rootNodes=[]},e}()},function(e,t,n){var o,i;o=n(8),e.exports=i=function(){function e(e,n){this.$el=e,this.hooks=n||new o,this.el=this.$el[0],this.id="nodeId"+t,this.parent=null,this.children=[],t++,this.init()}var t;return t=1,e.prototype.setParent=function(e){return this.parent=e},e.prototype.prependChild=function(e){return this.children.unshift(e)},e.prototype.appendChild=function(e){return this.children.push(e)},e.prototype.removeChild=function(e){var t;if((t=_.indexOf(this.children,e))!==-1)return this.children.splice(t,1)},e.prototype.init=function(){return this.hooks.init(this)},e.prototype.activate=function(){if(!this.isActivated())return this.setAsActivated(),this.hooks.activate(this)},e.prototype.remove=function(){if(!this.isRemoved())return this.setAsRemoved(),this.isActivated()?this.unload():void 0},e.prototype.unload=function(){return this.hooks.unload(this),this.setAsNotActivated()},e.prototype.setAsActivated=function(){return this._isActivated=!0},e.prototype.setAsNotActivated=function(){return this._isActivated=!1},e.prototype.isActivated=function(){return null!=this._isActivated?this._isActivated:this._isActivated=!1},e.prototype.setAsRemoved=function(){return this._isRemoved=!0},e.prototype.isRemoved=function(){return null!=this._isRemoved?this._isRemoved:this._isRemoved=!1},e}()},function(e,t){var n,o=[].slice;e.exports=n=function(){function e(){}return e.prototype.onInit=function(e){return this.onInitCallbacks().push(e)},e.prototype.onInitCallbacks=function(){return null!=this._onInitCallbacks?this._onInitCallbacks:this._onInitCallbacks=[]},e.prototype.init=function(){var e,t,n,i,r,s;for(e=1<=arguments.length?o.call(arguments,0):[],r=this.onInitCallbacks(),s=[],n=0,i=r.length;n<i;n++)t=r[n],s.push(t.apply(null,e));return s},e.prototype.onActivation=function(e){return this.onActivationCallbacks().push(e)},e.prototype.onActivationCallbacks=function(){return null!=this._onActivationCallbacks?this._onActivationCallbacks:this._onActivationCallbacks=[]},e.prototype.activate=function(){var e,t,n,i,r,s;for(e=1<=arguments.length?o.call(arguments,0):[],r=this.onActivationCallbacks(),s=[],n=0,i=r.length;n<i;n++)t=r[n],s.push(t.apply(null,e));return s},e.prototype.onUnload=function(e){return this.onUnloadCallbacks().push(e)},e.prototype.onUnloadCallbacks=function(){return null!=this._onUnloadCallbacks?this._onUnloadCallbacks:this._onUnloadCallbacks=[]},e.prototype.unload=function(){var e,t,n,i,r,s;for(e=1<=arguments.length?o.call(arguments,0):[],r=this.onUnloadCallbacks(),s=[],n=0,i=r.length;n<i;n++)t=r[n],s.push(t.apply(null,e));return s},e.prototype._reset=function(){return this._onInitCallbacks=[],this._onActivationCallbacks=[],this._onUnloadCallbacks=[]},e}()},function(e,t,n){var o,i;o=n(10),e.exports=i=function(){function e(e,t,o){if(this.node=e,this.config=t,this.launcherHooks=o,null==this.launcherHooks)throw new Error("Launcher hooks are required");this.$el=this.node.$el,this.el=this.node.el,this.isComponentIndex()&&n++,this.identifyNodeAttributes(),this.initNodeDataObject()}var t,n;return n=0,t="semarf",e.prototype.identifyNodeAttributes=function(){var e;return this.isStandAlone()?(e=this.config.extractStandAloneNodeData(this.$el),this.namespaceName=e[0],this.nodeName=e[1],e):(this.namespaceName=this.component().namespace,this.nodeName=this.isComponentIndex()?"index":this.nodeUnderscoredName())},e.prototype.initNodeDataObject=function(){var e;return this.nodeData=this.initNodeData(),null!=(e=this._hooks())&&"function"==typeof e.init?e.init(this.nodeData):void 0},e.prototype.initNodeData=function(){var e,t,n,i,r,s;return i=this.namespaceName,n=this._camelize(this.namespaceName),this.isStandAlone()?(t=null,e=null):(t=this.component().name,e=this._camelize(t)),new o({el:this.el,$el:this.$el,isStandAlone:this.isStandAlone(),isComponentIndex:this.isComponentIndex(),isComponentPart:!this.isStandAlone(),componentId:this.isStandAlone()?null:this.component().id,componentIndexNode:(null!=(r=this.componentIndexNode())&&null!=(s=r.nodeWrapper)?s.nodeData:void 0)||null,nodeName:this._camelize(this.nodeName),nodeNameUnderscored:this.nodeName,componentName:e,componentNameUnderscored:t,namespaceName:n,namespaceNameUnderscored:i})},e.prototype.unload=function(){var e;return null!=(e=this._hooks())&&"function"==typeof e.unload&&e.unload(this.nodeData),delete this.nodeData,delete this.node},e.prototype.isStandAlone=function(){return null!=this._isStandAlone?this._isStandAlone:this._isStandAlone=this.config.isStandAlone(this.$el)},e.prototype.component=function(){var e,o,i;return null!=this._component?this._component:this._component=this.isComponentIndex()?(i=this.config.extractComponentIndexNodeData(this.$el),o=i[0],e=i[1],i,{namespace:o,name:e,id:n,node:this.node}):null!=this.node.parent?this.node.parent.nodeWrapper.component():{namespace:t,name:t,id:0,node:this.node}},e.prototype.componentIndexNode=function(){return null!=this._componentIndexNode?this._componentIndexNode:this._componentIndexNode=this.isStandAlone()||this.isComponentIndex()?null:this.component().node},e.prototype.isComponentIndex=function(){return null!=this._isComponentIndex?this._isComponentIndex:this._isComponentIndex=this.config.isComponentIndex(this.$el)},e.prototype.nodeUnderscoredName=function(){return null!=this._nodeUnderscoredName?this._nodeUnderscoredName:this._nodeUnderscoredName=this.config.nodeUnderscoredName(this.$el)},e.prototype._hooks=function(){return this.launcherHooks},e.prototype._camelize=function(e){return e.replace(/(?:^|[-_])(\w)/g,function(e,t){return t?t.toUpperCase():""})},e}()},function(e,t){var n;e.exports=n=function(){function e(e){_.extend(this,e),this.data={}}return e.prototype.el=null,e.prototype.$el=null,e.prototype.isComponentIndex=null,e.prototype.isComponentPart=null,e.prototype.isStandAlone=null,e.prototype.componentId=null,e.prototype.componentIndexNode=null,e.prototype.nodeName=null,e.prototype.componentName=null,e.prototype.namespaceName=null,e.prototype.nodeNameUnderscored=null,e.prototype.componentNameUnderscored=null,e.prototype.namespaceNameUnderscored=null,e.prototype.setData=function(e,t){return this.data[e]=t},e.prototype.getData=function(e){return this.data[e]},e}()}]);
//# sourceMappingURL=vtree.min.js.map